<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand fw-bold" routerLink="/panel-cliente">Estudio Jur√≠dico</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto">
        <li class="nav-item">
          <a class="nav-link" routerLink="/panel-cliente/dashboard" routerLinkActive="active">Dashboard</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/panel-cliente/turnos" routerLinkActive="active">Mis Turnos</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/panel-cliente/consultas" routerLinkActive="active">Consultas</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/panel-cliente/casos" routerLinkActive="active">Mis Casos</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/panel-cliente/documentos" routerLinkActive="active">Documentos</a>
        </li>
      </ul>
      
      <div class="user-menu">
        <span class="text-white">{{usuario?.nombre || 'Usuario'}}</span>
      </div>
    </div>
  </div>
</nav>

  <!-- Hero Section -->
  <section class="panel-hero">
    <div class="container">
      <h1>üí¨ Mis Consultas</h1>
      <p>Revisa el estado de tus consultas y respuestas de nuestros asesores</p>
    </div>
  </section>

  <!-- Contenido Principal -->
  <div class="container">
    
    <!-- Bot√≥n Nueva Consulta -->
    <div class="mb-4">
      <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#nuevaConsultaModal">
        ‚úâÔ∏è Nueva Consulta
      </button>
    </div>

    <!-- Estad√≠sticas -->
    <div class="stat-inline">
      <div class="stat-item">
        <div class="stat-item-value">8</div>
        <div class="stat-item-label">Total Consultas</div>
      </div>
      <div class="stat-item">
        <div class="stat-item-value" style="color: #ffc107;">3</div>
        <div class="stat-item-label">Pendientes</div>
      </div>
      <div class="stat-item">
        <div class="stat-item-value" style="color: #198754;">5</div>
        <div class="stat-item-label">Respondidas</div>
      </div>
    </div>

    <!-- Filtros -->
    <div class="filtros-section">
      <div class="row align-items-center">
        <div class="col-md-4 mb-3 mb-md-0">
          <input type="text" class="form-control" placeholder="üîç Buscar consulta..." id="buscarConsulta">
        </div>
        <div class="col-md-3 mb-3 mb-md-0">
          <select class="form-select" id="filtroEstado">
            <option value="todos">Todos los estados</option>
            <option value="pendiente">Pendientes</option>
            <option value="respondida">Respondidas</option>
            <option value="cerrada">Cerradas</option>
          </select>
        </div>
        <div class="col-md-3 mb-3 mb-md-0">
          <select class="form-select" id="filtroCategoria">
            <option value="todos">Todas las categor√≠as</option>
            <option value="laboral">Derecho Laboral</option>
            <option value="civil">Derecho Civil</option>
            <option value="penal">Derecho Penal</option>
            <option value="familiar">Derecho Familiar</option>
            <option value="comercial">Derecho Comercial</option>
          </select>
        </div>
        <div class="col-md-2">
          <button class="btn btn-outline-primary w-100" onclick="aplicarFiltros()">Filtrar</button>
        </div>
      </div>
    </div>

    <!-- Lista de Consultas -->
    <div id="listaConsultas">
      
      <!-- Consulta Pendiente -->
      <div class="consulta-card">
        <div class="consulta-header">
          <div>
            <div class="consulta-titulo">¬øC√≥mo proceder ante un despido injustificado?</div>
            <div class="consulta-fecha">
              <span>üìÖ</span> 20 de Noviembre, 2024 - 14:30 hs
            </div>
            <div class="mt-2">
              <span class="categoria-badge cat-laboral">Derecho Laboral</span>
            </div>
          </div>
          <span class="badge status-pendiente">Pendiente</span>
        </div>
        <div class="consulta-contenido">
          Fui despedido sin previo aviso despu√©s de 5 a√±os trabajando en la empresa. Mi empleador alega bajo rendimiento pero nunca recib√≠ ninguna advertencia escrita. ¬øQu√© acciones legales puedo tomar? ¬øTengo derecho a alguna indemnizaci√≥n?
        </div>
        <div class="consulta-footer">
          <small class="text-muted">Consulta #2024-008</small>
          <button class="btn btn-sm btn-outline-primary" onclick="verDetalles(8)">Ver Detalles</button>
        </div>
      </div>

      <!-- Consulta Respondida -->
      <div class="consulta-card respondida">
        <div class="consulta-header">
          <div>
            <div class="consulta-titulo">Tr√°mites para divorcio de mutuo acuerdo</div>
            <div class="consulta-fecha">
              <span>üìÖ</span> 18 de Noviembre, 2024 - 10:15 hs
            </div>
            <div class="mt-2">
              <span class="categoria-badge cat-familiar">Derecho Familiar</span>
            </div>
          </div>
          <span class="badge status-respondida">Respondida</span>
        </div>
        <div class="consulta-contenido">
          Mi esposa y yo hemos decidido divorciarnos de com√∫n acuerdo. No tenemos hijos menores y ya acordamos la divisi√≥n de bienes. ¬øQu√© documentaci√≥n necesitamos presentar? ¬øCu√°nto tiempo demora el tr√°mite?
        </div>
        
        <!-- Respuesta -->
        <div class="respuesta-box">
          <div class="respuesta-header">
            <span>‚úÖ</span> Respuesta del Asesor
          </div>
          <div class="respuesta-contenido">
            Para un divorcio de mutuo acuerdo sin hijos menores, necesitar√°n: certificado de matrimonio original, DNI de ambas partes, convenio regulador firmado por ambos, y certificados de domicilio. El tr√°mite suele demorar entre 2 a 4 meses. Les recomiendo agendar un turno para revisar la documentaci√≥n en detalle.
          </div>
          <div class="respuesta-autor">
            <strong>Dr. Carlos Rodr√≠guez</strong> - 18 de Noviembre, 2024 - 16:45 hs
          </div>
        </div>

        <div class="consulta-footer">
          <small class="text-muted">Consulta #2024-007</small>
          <div class="d-flex gap-2">
            <button class="btn btn-sm btn-outline-primary" onclick="verDetalles(7)">Ver Detalles</button>
            <button class="btn btn-sm btn-primary" onclick="agendarTurno()">Agendar Turno</button>
          </div>
        </div>
      </div>

      <!-- Consulta Pendiente -->
      <div class="consulta-card">
        <div class="consulta-header">
          <div>
            <div class="consulta-titulo">Contrato de alquiler - cl√°usulas abusivas</div>
            <div class="consulta-fecha">
              <span>üìÖ</span> 15 de Noviembre, 2024 - 09:20 hs
            </div>
            <div class="mt-2">
              <span class="categoria-badge cat-civil">Derecho Civil</span>
            </div>
          </div>
          <span class="badge status-pendiente">Pendiente</span>
        </div>
        <div class="consulta-contenido">
          Mi contrato de alquiler incluye una cl√°usula que me proh√≠be recibir visitas despu√©s de las 22hs. ¬øEs esto legal? Tambi√©n me cobran un dep√≥sito equivalente a 4 meses de alquiler.
        </div>
        <div class="consulta-footer">
          <small class="text-muted">Consulta #2024-006</small>
          <button class="btn btn-sm btn-outline-primary" onclick="verDetalles(6)">Ver Detalles</button>
        </div>
      </div>

      <!-- Consulta Respondida -->
      <div class="consulta-card respondida">
        <div class="consulta-header">
          <div>
            <div class="consulta-titulo">Deuda de tarjeta de cr√©dito - asesoramiento</div>
            <div class="consulta-fecha">
              <span>üìÖ</span> 12 de Noviembre, 2024 - 11:30 hs
            </div>
            <div class="mt-2">
              <span class="categoria-badge cat-comercial">Derecho Comercial</span>
            </div>
          </div>
          <span class="badge status-respondida">Respondida</span>
        </div>
        <div class="consulta-contenido">
          Tengo una deuda de tarjeta de cr√©dito acumulada que no puedo pagar. El banco me amenaza con juicio. ¬øQu√© opciones tengo?
        </div>
        
        <div class="respuesta-box">
          <div class="respuesta-header">
            <span>‚úÖ</span> Respuesta del Asesor
          </div>
          <div class="respuesta-contenido">
            Tiene varias opciones: negociar un plan de pagos, solicitar una quita o refinanciaci√≥n. No se recomienda ignorar la situaci√≥n. Le sugiero agendar una consulta presencial para analizar su caso espec√≠fico y preparar una propuesta de pago al banco.
          </div>
          <div class="respuesta-autor">
            <strong>Dra. Mar√≠a Gonz√°lez</strong> - 13 de Noviembre, 2024 - 09:15 hs
          </div>
        </div>

        <div class="consulta-footer">
          <small class="text-muted">Consulta #2024-005</small>
          <button class="btn btn-sm btn-outline-primary" onclick="verDetalles(5)">Ver Detalles</button>
        </div>
      </div>

      <!-- Consulta Cerrada -->
      <div class="consulta-card cerrada">
        <div class="consulta-header">
          <div>
            <div class="consulta-titulo">Asesoramiento sobre herencia</div>
            <div class="consulta-fecha">
              <span>üìÖ</span> 05 de Noviembre, 2024 - 16:00 hs
            </div>
            <div class="mt-2">
              <span class="categoria-badge cat-civil">Derecho Civil</span>
            </div>
          </div>
          <span class="badge status-cerrada">Cerrada</span>
        </div>
        <div class="consulta-contenido">
          Necesito informaci√≥n sobre el proceso de sucesi√≥n tras el fallecimiento de mi padre.
        </div>
        <div class="respuesta-box">
          <div class="respuesta-header">
            <span>‚úÖ</span> Respuesta del Asesor
          </div>
          <div class="respuesta-contenido">
            El proceso incluye obtener certificado de defunci√≥n, declaratoria de herederos, inventario de bienes, y pago de impuestos sucesorios. Caso resuelto satisfactoriamente en consulta presencial.
          </div>
          <div class="respuesta-autor">
            <strong>Dr. Carlos Rodr√≠guez</strong> - 06 de Noviembre, 2024 - 10:00 hs
          </div>
        </div>
        <div class="consulta-footer">
          <small class="text-muted">Consulta #2024-004 - Caso Cerrado</small>
          <button class="btn btn-sm btn-outline-secondary" onclick="verDetalles(4)">Ver Detalles</button>
        </div>
      </div>

    </div>

  </div>

  <!-- Modal Nueva Consulta -->
  <div class="modal fade" id="nuevaConsultaModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">‚úâÔ∏è Nueva Consulta</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="formConsulta">
            <div class="mb-3">
              <label for="categoria" class="form-label">Categor√≠a</label>
              <select class="form-select" id="categoria" required>
                <option value="">Seleccione una categor√≠a...</option>
                <option value="laboral">Derecho Laboral</option>
                <option value="civil">Derecho Civil</option>
                <option value="penal">Derecho Penal</option>
                <option value="familiar">Derecho Familiar</option>
                <option value="comercial">Derecho Comercial</option>
                <option value="otro">Otro</option>
              </select>
            </div>

            <div class="mb-3">
              <label for="asunto" class="form-label">Asunto</label>
              <input type="text" class="form-control" id="asunto" placeholder="T√≠tulo breve de tu consulta" required>
            </div>

            <div class="mb-3">
              <label for="descripcion" class="form-label">Descripci√≥n Detallada</label>
              <textarea class="form-control" id="descripcion" rows="6" placeholder="Describe tu situaci√≥n con el mayor detalle posible..." required></textarea>
              <small class="text-muted">Incluye fechas, documentos disponibles y cualquier informaci√≥n relevante</small>
            </div>

            <div class="mb-3">
              <label class="form-label">Urgencia</label>
              <div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="urgencia" id="urgenciaBaja" value="baja" checked>
                  <label class="form-check-label" for="urgenciaBaja">Baja</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="urgencia" id="urgenciaMedia" value="media">
                  <label class="form-check-label" for="urgenciaMedia">Media</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="urgencia" id="urgenciaAlta" value="alta">
                  <label class="form-check-label" for="urgenciaAlta">Alta</label>
                </div>
              </div>
            </div>

            <div class="alert alert-info mb-0">
              <small>
                <strong>üìå Nota:</strong> Tu consulta ser√° respondida por uno de nuestros asesores en un plazo de 24 a 48 horas h√°biles.
              </small>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary" onclick="enviarConsulta()">Enviar Consulta</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-dark text-white py-4 mt-5">
    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <h5>Estudio Jur√≠dico</h5>
          <p class="small">Soluciones legales profesionales desde 2003</p>
        </div>
        <div class="col-md-6 text-md-end">
          <p class="small mb-0">&copy; 2024 Estudio Jur√≠dico. Todos los derechos reservados.</p>
        </div>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    function enviarConsulta() {
      const categoria = document.getElementById('categoria').value;
      const asunto = document.getElementById('asunto').value;
      const descripcion = document.getElementById('descripcion').value;

      if (!categoria || !asunto || !descripcion) {
        alert('Por favor completa todos los campos requeridos');
        return;
      }

      alert('‚úÖ ¬°Consulta enviada exitosamente!\n\nRecibir√°s una respuesta en un plazo de 24 a 48 horas h√°biles.');

      // Cerrar modal
      const modal = bootstrap.Modal.getInstance(document.getElementById('nuevaConsultaModal'));
      modal.hide();

      // Limpiar formulario
      document.getElementById('formConsulta').reset();

      // Aqu√≠ ir√≠a la l√≥gica para enviar al backend
    }

    function verDetalles(id) {
      alert('Ver detalles de la consulta #2024-00' + id);
      // Aqu√≠ ir√≠a la navegaci√≥n a vista detallada
    }

    function agendarTurno() {
      alert('Redirigiendo a agendar turno...');
      // window.location.href = '/turnos';
    }

    function aplicarFiltros() {
      const estado = document.getElementById('filtroEstado').value;
      const categoria = document.getElementById('filtroCategoria').value;
      const busqueda = document.getElementById('buscarConsulta').value;

      console.log('Filtros:', { estado, categoria, busqueda });
      // Aqu√≠ ir√≠a la l√≥gica de filtrado
    }
  </script>